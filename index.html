<html>

<head>
    <title>Express</title>
    <link href="/stylesheets/style.css" rel="stylesheet">
</head>

<body>
<h1>Express</h1>
<p>Welcome to Express</p>

<!--產生 可以輸入 電影台詞 電影腳色 電影名稱 (provider, movie_name, quote) 的表單-->
<form>
    <label for="provider">provider:</label>
    <input id="provider" name="provider" type="text"><br><br>
    <label for="movie_name">movie_name:</label>
    <input id="movie_name" name="movie_name" type="text"><br><br>
    <label for="quote">quote:</label>
    <input id="quote" name="quote" type="text"><br><br>
    <input type="submit" value="Submit">
</form>

<p id="log"></p>

<script>
    // 將上面表單的資料，透過 fetch async await 來發送 POST 請求到/api/insert ，
    // 並在成功後顯示伺服器回傳的【純文字】訊息
    document.getElementById('movie_form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const provider = document.getElementById('provider').value;
        const movie_name = document.getElementById('movie_name').value;
        const quote = document.getElementById('quote').value;
        const res = await fetch('/api/insert', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({provider, movie_name, quote})
        });
        const data = await res.text();
        document.getElementById('log').innerText = data;
    });


</script>

</body>

</html>
